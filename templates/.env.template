# Matrix Server Environment Configuration
# Copy this file to .env and fill in all values
# DO NOT commit .env to version control!

# ============================================
# Domain Configuration
# ============================================

# Your Matrix server domain (e.g., matrix.example.com)
MATRIX_DOMAIN=matrix.example.com

# Your Element web client domain (e.g., element.example.com)
ELEMENT_DOMAIN=element.example.com

# ============================================
# Database Configuration
# ============================================

# PostgreSQL database password
# Generate with: openssl rand -base64 24 | tr -d "=+/" | cut -c1-32
# IMPORTANT: Must be alphanumeric only (no special characters)
# CRITICAL: If you change this, you MUST also update:
#   - synapse/config/homeserver.yaml (database.args.password)
#   - mas/config/config.yaml (database.uri)
POSTGRES_PASSWORD=CHANGE_ME_32_CHARS_ALPHANUMERIC

# ============================================
# Synapse Configuration
# ============================================

# Registration shared secret (for creating admin users)
# Generate with: openssl rand -base64 32 | tr -d "=+/"
SYNAPSE_REGISTRATION_SHARED_SECRET=CHANGE_ME_LONG_RANDOM_STRING

# ============================================
# MAS (Matrix Authentication Service) Configuration
# ============================================

# MAS encryption secret (MUST be exactly 64 hex characters)
# Generate with: openssl rand -hex 32
MAS_SECRETS_ENCRYPTION=CHANGE_ME_64_HEX_CHARACTERS

# MAS keys secret (MUST be exactly 64 hex characters)
# Generate with: openssl rand -hex 32
MAS_SECRETS_KEYS=CHANGE_ME_64_HEX_CHARACTERS

# ============================================
# OIDC / Authelia Configuration (Optional)
# ============================================
# Only required if using upstream OIDC provider like Authelia

# Authelia server URL (e.g., https://auth.example.com)
AUTHELIA_URL=https://auth.example.com

# OIDC Client ID for MAS (must match Authelia configuration)
AUTHELIA_CLIENT_ID=matrix_mas

# OIDC Client Secret
# Generate with: openssl rand -base64 32 | tr -d "=+/"
# NOTE: In Authelia config, this must be hashed with pbkdf2
AUTHELIA_CLIENT_SECRET=CHANGE_ME_LONG_RANDOM_STRING

# ============================================
# Secret Generation Quick Reference
# ============================================
#
# Database Password (32 chars, alphanumeric only):
#   openssl rand -base64 24 | tr -d "=+/" | cut -c1-32
#
# Synapse Registration Secret:
#   openssl rand -base64 32 | tr -d "=+/"
#
# MAS Encryption Secret (64 hex chars):
#   openssl rand -hex 32
#
# MAS Keys Secret (64 hex chars):
#   openssl rand -hex 32
#
# OIDC Client Secret:
#   openssl rand -base64 32 | tr -d "=+/"
#
# Hash OIDC Secret for Authelia (run on Authelia server):
#   authelia crypto hash generate pbkdf2 --password 'YOUR_CLIENT_SECRET'
#
# ============================================
